<div class="main-content">

  <div class="report-toolbar">
    <span class="report-title"> <i class="k-icon k-i-check"></i> Projects</span>

    <div class="right-section ms-auto">
      <button kendoButton icon="refresh" themeColor="primary" (click)="refresh()">Refresh</button>
      <button kendoButton icon="plus" themeColor="secondary" class="ms-1">New</button>
    </div>
  </div>

  <kendo-expansionpanel [expanded]="true" class="mt-2">
    <ng-template kendoExpansionPanelTitleDirective>
      <div class="header-content d-flex align-items-center">
        <kendo-icon name="filter"></kendo-icon>
        <span class="ms-1"> Filters</span>
      </div>
    </ng-template>

    <div class="row">

      <div class="col-md-3">
        <kendo-label class="k-form fw-semibold" text="Country" [for]="input"></kendo-label>
        <kendo-dropdownlist valueField="Id" textField="Text" [defaultItem]="cboDefaultItem" [data]="countries$ | async"
          [(ngModel)]="selectedCountry"> </kendo-dropdownlist>
      </div>

      <div class="col-md-3">
        <kendo-label class="k-form fw-semibold" text="Name" [for]="input"></kendo-label>
        <input #input kendoTextBox [ngClass]="name" class="w-100" />
      </div>

    </div>

  </kendo-expansionpanel>

  

  
    <kendo-grid  #grid [data]="projects$ | async" [pageable]="true" class="mt-2"
        
        [pageSize]="15" [resizable]="true">

      <ng-template kendoGridToolbarTemplate>
        
        <button kendoButton (click)="grid.autoFitColumns()">
            Auto-fit all columns
        </button>
    </ng-template>

      <kendo-grid-column [width]="200" field="Code" title="Code"></kendo-grid-column>
      <kendo-grid-column [width]="200" field="Name" title="Name"></kendo-grid-column>
      <kendo-grid-column [width]="200" field="WTGUnits" title="WTG units"> </kendo-grid-column>
      <kendo-grid-column [width]="200" field="ContractStageName" title="Contract stage"></kendo-grid-column>
      <kendo-grid-column [width]="50" field="ContractScopeName" title="Contract scope"></kendo-grid-column>
      <kendo-grid-column [width]="300" field="ProductLineName" title="Product line" [style]="{'white-space': 'nowrap'}"></kendo-grid-column>
      <kendo-grid-column [width]="300" field="ProductLineName" title="Product line" [style]="{'white-space': 'nowrap'}"></kendo-grid-column>
      <kendo-grid-column [width]="300" field="ProductLineName" title="Product line" [style]="{'white-space': 'nowrap'}"></kendo-grid-column>
      <kendo-grid-column [width]="50" field="PlanningHorizon" title="Planning horizon"></kendo-grid-column>
      <kendo-grid-column [width]="50" field="ProjectState" title="Project state"></kendo-grid-column>
      <kendo-grid-column [width]="50" field="Validity" title="Validity dates"></kendo-grid-column>

      <div *kendoGridDetailTemplate="let dataItem">
        <kendo-grid [data]="projects$ | async" [pageable]="true" [pageSize]="15">
          <kendo-grid-column field="Code" title="Code"></kendo-grid-column>
          <kendo-grid-column field="Name" title="Name"></kendo-grid-column>
          <kendo-grid-column field="WTGUnits" title="WTG units"> </kendo-grid-column>
          <kendo-grid-column field="ContractStageName" title="Contract stage"></kendo-grid-column>
          <kendo-grid-column field="ContractScopeName" title="Contract scope"></kendo-grid-column>
          <kendo-grid-column field="ProductLineName" title="Product line" [style]="{'white-space': 'nowrap'}"></kendo-grid-column>
          <kendo-grid-column field="PlanningHorizon" title="Planning horizon"></kendo-grid-column>
          <kendo-grid-column field="ProjectState" title="Project state"></kendo-grid-column>
          <kendo-grid-column field="Validity" title="Validity dates"></kendo-grid-column>
        </kendo-grid>
      </div>
    </kendo-grid>
  

</div>