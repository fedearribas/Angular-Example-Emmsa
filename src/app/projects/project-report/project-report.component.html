<div class="main-content">

  <p-toolbar styleClass="mb-2 p-2">
    <ng-template pTemplate="left">
      <i class="pi pi-check"></i><span class="report-title ml-2">Projects</span>
    </ng-template>
    <ng-template pTemplate="right">
      <button pButton icon="pi pi-refresh" type="button" label="Refresh" (click)="refresh()"></button>
    </ng-template>

  </p-toolbar>

  <p-accordion>
    <p-accordionTab header="Filters" [selected]="true">
      <div class="formgrid grid">
        <div class="field sm:col-12 md:col-3">
          <label for="country" class="font-bold">Country</label>
          <p-dropdown id="country" [options]="(countries$ | async)!" [(ngModel)]="selectedCountryId" placeholder="All"
            optionValue="id" optionLabel="text" styleClass="w-full"></p-dropdown>
        </div>

        <div class="field sm:col-12 md:col-3">
          <label for="name" class="font-bold">Code / Name</label>
          <input id="name" type="text" class="w-full" pInputText [(ngModel)]="name" autocomplete="off" />
        </div>
      </div>
    </p-accordionTab>
  </p-accordion>

  <div *ngIf="projects$ | async as projects" class="mt-2">
    <p-table id="grdProject" styleClass="p-datatable-gridlines" [value]="projects"
      [paginator]="true" [rows]="15" [showCurrentPageReport]="true"
      [tableStyle]="{'min-width': '50rem', 'white-space': 'nowrap'}">
      <ng-template pTemplate="header" style="background: red;">
        <tr>
          <th>Code</th>
          <th>Name</th>
          <th>WTG units</th>
          <th>Contract stage</th>
          <th>Contract scope</th>
          <th>Product line</th>
          <th>Planning horizon</th>
          <th>Project state</th>
          <th>Valid dates</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-project>
        <tr>
          <td>{{project.code}}</td>
          <td>{{project.name}}</td>
          <td class="text-right">{{project.wtgUnits}}</td>
          <td>{{project.contractStageName}}</td>
          <td>{{project.contractScopeName}}</td>
          <td>{{project.productLineName}}</td>
          <td class="text-center">{{project.planningHorizon}}</td>
          <td>{{project.projectState}}</td>
          <td class="text-center">{{project.validity}}</td>
        </tr>
      </ng-template>
    </p-table>
  </div>
  
  <p-messages *ngIf="messages && messages.length > 0" [(value)]="messages"></p-messages>

</div>